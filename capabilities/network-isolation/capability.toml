[capability]
id = "network-isolation"
name = "Network isolation"
description = "HTTP/HTTPS filtering proxy with domain policies and TCP/UDP blocking"

# System packages
[packages]
system = [
    "netcat-openbsd",  # For checking if proxy is listening
]

# VM setup installs mitmproxy and CA certificate
[[phase.setup]]
name = "network-isolation-setup"
script_files = ["vm_setup.sh"]

# Runtime enforces iptables rules and proxy configuration
[[phase.runtime]]
name = "network-isolation-enforcement"
script_files = ["vm_runtime.sh"]
