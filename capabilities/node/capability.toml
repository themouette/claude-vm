[capability]
id = "node"
name = "Node.js"
description = "Node.js runtime and npm package manager"

[packages]
system = ["nodejs"]
setup_script = """
#!/bin/bash
set -e
# Add NodeSource repository for Node.js 22.x
curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash -
"""

[vm_runtime]
script = """
#!/bin/bash
# Write Node.js context for Claude
mkdir -p ~/.claude-vm/context
cat > ~/.claude-vm/context/node.txt <<EOF
Node.js version: $(node --version 2>/dev/null || echo "not available")
npm version: $(npm --version 2>/dev/null || echo "not available")
Global packages: $(npm list -g --depth=0 2>/dev/null | wc -l || echo "unknown")
EOF
"""
